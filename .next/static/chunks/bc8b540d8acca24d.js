(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(47167);var s=e.i(17923),r=e.i(81418),l=e.i(51737),n=e.i(75254);let d=(0,n.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var i=e.i(69638),o=e.i(98919);let c=(0,n.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var x=e.i(97250),m=e.i(91799),h=e.i(60289);let b=(0,n.default)("sliders-vertical",[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]]);var u=e.i(70756),p=e.i(43531);let g=(0,n.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),f=(0,n.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),k=(0,n.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var j=e.i(39312);let v=(0,n.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),w=(0,n.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),N=(0,n.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var y=e.i(20278);let C=(0,n.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var S=e.i(31278),_=e.i(74875),A=e.i(64807),P=e.i(51970);let T=[],L={standard:{price:5,label:"Standard",features:["5k comments/mo","1 social account","Standard Protection"]},plus:{price:15,label:"Plus",features:["20k comments/mo","2 social accounts","Standard Protection"]},pro:{price:30,label:"Pro",features:["50k comments/mo","5 social accounts","Advanced Reasoning","Custom Policies"]},max:{price:75,label:"Max",features:["200k comments/mo","Unlimited accounts","Advanced Reasoning","Custom Policies"]}},M=({onLogout:e,isDarkMode:n,toggleTheme:M})=>{let[R,E]=(0,a.useState)(()=>{let e=new URLSearchParams(window.location.search).get("tab");return["overview","controls","plan","security"].includes(e)?e:"overview"}),[F,$]=(0,a.useState)(!1),[D,U]=(0,a.useState)(!1),[z,I]=(0,a.useState)(!1),[V,O]=(0,a.useState)(null),H=(e,t="success")=>{O({message:e,type:t}),setTimeout(()=>O(null),3e3)},[q,G]=(0,a.useState)(T),[B,J]=(0,a.useState)(null),[W,Z]=(0,a.useState)(!1),[Y,K]=(0,a.useState)(!1),[Q,X]=(0,a.useState)(!1),[ee,et]=(0,a.useState)(null),[ea,es]=(0,a.useState)(""),[er,el]=(0,a.useState)(!1),[en,ed]=(0,a.useState)(!1),[ei,eo]=(0,a.useState)(null),[ec,ex]=(0,a.useState)(!1),[em,eh]=(0,a.useState)("USD"),[eb,eu]=(0,a.useState)([]),[ep,eg]=(0,a.useState)({scanned:0,moderated:0,averageResponseTime:0}),[ef,ek]=(0,a.useState)([]),[ej,ev]=(0,a.useState)(10),[ew,eN]=(0,a.useState)({plan:"",policies:{profanity:!0,sexualContent:!0,hateSpeech:!0,selfHarm:!1,violence:!1,negativity:!1,harassment:!1,spam:!0},customInstructions:"",confidenceThreshold:80,selectedCustomPolicies:[],customPolicyDescriptions:{}}),[ey,eC]=(0,a.useState)(null),eS=a.default.useMemo(()=>!!ey&&JSON.stringify(ew)!==JSON.stringify(ey),[ew,ey]),[e_,eA]=(0,a.useState)(!1),[eP,eT]=(0,a.useState)(null),[eL,eM]=(0,a.useState)(""),[eR,eE]=(0,a.useState)(""),[eF,e$]=(0,a.useState)("spam"),[eD,eU]=(0,a.useState)(!1),[ez,eI]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=!1;if(e.get("tab")!==R&&(e.set("tab",R),t=!0),B&&e.get("account")!==B.id&&(e.set("account",B.id),t=!0),t){let t=`${window.location.pathname}?${e.toString()}`;window.history.replaceState({},"",t)}},[R,B]);let eV=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{eV.current&&!eV.current.contains(e.target)&&Z(!1)};return W&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[W]);let eO=async(t=!1,a)=>{$(!0);try{let{accounts:e,plan_type:s}=await (0,P.getDashboardInfo)();if(eN(e=>({...e,plan:s||""})),s||E("plan"),t)try{try{let e=await fetch("https://ipapi.co/json/");if(429===e.status)throw Error("429");let t=await e.json();eh("IN"===t.country_code?"INR":"USD")}catch(e){try{let e=await fetch("http://ip-api.com/json/"),t=await e.json();eh("IN"===t.countryCode?"INR":"USD")}catch(e){console.warn("Location detection failed, defaulting to USD"),eh("USD")}}let e=await (0,P.getPlans)();eu(e)}catch(e){console.error("Failed to load dynamic pricing:",e)}if(e.length>0){let t=e.map(e=>({id:e.account_id,name:e.account_name,handle:e.account_name.toLowerCase().replace(/\s+/g,"_"),profilePictureUrl:e.profile_picture_url,isDeauthorized:e.is_deauthorized||!1}));G(t);let r=new URLSearchParams(window.location.search).get("account"),l=a||r||B?.id,n=e.find(e=>e.account_id===l)||e[0];J({id:n.account_id,name:n.account_name,handle:n.account_name.toLowerCase().replace(/\s+/g,"_"),profilePictureUrl:n.profile_picture_url,isDeauthorized:n.is_deauthorized||!1}),eo(n);let d=n.policies.split(",").map(e=>e.trim()),i={plan:s||"standard",policies:{profanity:d.includes("profanity"),sexualContent:d.includes("sexualContent"),hateSpeech:d.includes("hateSpeech"),selfHarm:d.includes("selfHarm"),violence:d.includes("violence"),negativity:d.includes("negativity"),harassment:d.includes("harassment"),spam:d.includes("spam")},customInstructions:n.custom_policy||"",confidenceThreshold:n.confidence_threshold||80,selectedCustomPolicies:(()=>{try{let e=JSON.parse(n.custom_policy||"[]");return Array.isArray(e)?e:[]}catch{return[]}})(),customPolicyDescriptions:(n.custom_policy_definitions||[]).reduce((e,t)=>(e[t.policy_name]=t.description,e),{})};eN(i),eC(i),await eH(n.account_id,ej),eg({scanned:n?.stats?.comments_scanned??0,moderated:n?.stats?.comments_moderated??0,averageResponseTime:n?.stats?.comments_moderated>0?(n?.stats?.processing_time??0)/n.stats.comments_moderated:0})}else G([]),J(null),eg({scanned:0,moderated:0,averageResponseTime:0})}catch(t){console.error("Failed to load dashboard data",t),401===t.status||403===t.status?(H("Session expired. Logging out...","error"),setTimeout(()=>e?.(),2e3)):H("Failed to load dashboard data","error")}finally{$(!1)}},eH=async(e,t)=>{U(!0);try{let a=(await (0,P.getInterventions)(e,t)).map(e=>({id:e.comment_id,author:e.username||"Anonymous",text:e.text,riskLevel:e.riskLevel||"SAFE",timestamp:eq(e.moderated_at),actionTaken:e.suggested_action||"NONE",commenter_id:e.commenter_id}));ek(a)}catch(e){console.error("Failed to load interventions",e),H("Failed to load recent interventions","error")}finally{U(!1)}},eq=e=>{if(!e)return"Unknown";let t=Math.floor(Date.now()/1e3)-Number(e);return t<60?"Just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`};(0,a.useEffect)(()=>{eO(!0),eG();let e=new URLSearchParams(window.location.search).get("code");e&&eB(e)},[]);let eG=async()=>{try{let e=await (0,P.getMFAStatus)();K(e)}catch(e){console.error("Failed to check MFA status",e)}},eB=async t=>{$(!0);try{await (0,P.addInstagramAccount)(t),window.history.replaceState({},document.title,window.location.pathname),await eO(),H("Account linked successfully!")}catch(t){console.error("Failed to link Instagram account",t),window.history.replaceState({},document.title,window.location.pathname),403===t.status?(H("Subscription required to link account","error"),E("plan")):401===t.status?(H("Session expired. Logging out...","error"),setTimeout(()=>e?.(),2e3)):H(t.message||"Failed to link Instagram account","error")}finally{$(!1)}},eJ=async()=>{el(!0);try{let e=await (0,P.initiateMFASetup)();et(e),X(!0)}catch(e){H(e.message||"Failed to initiate MFA setup","error")}finally{el(!1)}},eW=async()=>{if(ea){ed(!0);try{await (0,P.finalizeMFASetup)(ea),K(!0),X(!1),et(null),es(""),H("MFA enabled successfully!")}catch(e){H(e.message||"Invalid code","error")}finally{ed(!1)}}},eZ=async()=>{try{await (0,P.disableMFA)(),K(!1),H("MFA disabled")}catch(e){H(e.message||"Failed to disable MFA","error")}},eY=async()=>{if(B&&ei){I(!0);try{let e=Object.entries(ew.policies).filter(([e,t])=>t).map(([e,t])=>e).join(", ");await (0,P.saveDashboardControls)(B.id,ei.owner_user_id,e,ew.plan,JSON.stringify(ew.selectedCustomPolicies),ew.confidenceThreshold),eC(ew),H("Settings saved successfully!")}catch(t){console.error("Failed to save settings",t),401===t.status||403===t.status?(H("Session expired. Logging out...","error"),setTimeout(()=>e?.(),2e3)):H("Failed to save settings: "+(t.message||"Unknown error"),"error")}finally{I(!1)}}},eK=async()=>{if(!B||!eL||!eR)return;let e=`Treat comments with ${eR} as ${eF}`;if(e.length>100)return void H("Description is too long (max 100 characters combined)","error");try{I(!0),await (0,P.saveCustomPolicy)(B.id,eL,e),eN(t=>({...t,customPolicyDescriptions:{...t.customPolicyDescriptions,[eL]:e}})),eA(!1),eM(""),eE(""),e$("spam"),eT(null),H("Custom policy saved successfully")}catch(e){403===e.status&&"pro"===ew.plan?H("Limit reached. Upgrade to Max for up to 20 custom policies.","error"):H(e.message||"Failed to save custom policy","error")}finally{I(!1)}},eQ=async e=>{if(B)try{I(!0),await (0,P.deleteCustomPolicy)(B.id,e),eN(t=>{let a={...t.customPolicyDescriptions};return delete a[e],{...t,selectedCustomPolicies:t.selectedCustomPolicies.filter(t=>t!==e),customPolicyDescriptions:a}}),H("Custom policy deleted")}catch(e){H(e.message||"Failed to delete custom policy","error")}finally{I(!1)}},eX=e=>{eN(t=>({...t,selectedCustomPolicies:t.selectedCustomPolicies.includes(e)?t.selectedCustomPolicies.filter(t=>t!==e):[...t.selectedCustomPolicies,e]}))},e0=async(e,t)=>{if(!B)return;let a=ef.find(t=>t.id===e);if(a)try{await (0,P.processIntervention)(B.id,e,a.commenter_id||null,t,"COMMENT"),H(`Action "${t}" queued. It will be synced in a few minutes.`)}catch(e){console.error("Failed to process intervention",e),H("Failed to process intervention","error")}},e2=async()=>{if(ez){I(!0);try{await (0,P.removeInstagramAccount)(ez.id),H("Account removed successfully"),eU(!1),eI(null),eO(!0)}catch(e){H(e.message||"Failed to remove account","error")}finally{I(!1)}}},e1=async e=>{if(e===ew.plan)return;if(ex(!0),!await new Promise(e=>{let t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},document.body.appendChild(t)})){H("Razorpay SDK failed to load. Please check your internet connection.","error"),ex(!1);return}let t=eb.find(t=>t.name.toLowerCase().includes(L[e].label.toLowerCase())&&t.currency===em),a=null;if(t){if(!(a=await (0,P.createSubscription)(t.id))){H("Failed to initialize subscription. Please try again.","error"),ex(!1);return}}else console.warn("No matching Razorpay plan found for",e,em);let s={key:"rzp_test_S2zggyV3DlzZfa",name:"ShieldGram",description:`Upgrade to ${L[e].label} Plan`,image:"https://cdn-icons-png.flaticon.com/512/3233/3233515.png",handler:function(t){console.log("Payment Success: ",t),eN(t=>({...t,plan:e})),ex(!1),H(`Subscription updated to ${L[e].label}!`)},prefill:{name:B?.name||"ShieldGram User",email:"user@example.com",contact:""},theme:{color:"#6bb8e6"},modal:{ondismiss:function(){ex(!1)}}};a?s.subscription_id=a:(s.amount=100*L[e].price,s.currency="USD"),new window.Razorpay(s).open()},e4="pro"===ew.plan||"max"===ew.plan;return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 transition-colors duration-300 flex flex-col",children:[(0,t.jsx)("header",{className:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 sticky top-0 z-40",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:"/logo.svg",alt:"ShieldGram",className:"h-[44px] w-auto"}),(0,t.jsxs)("span",{className:"font-bold text-lg text-slate-900 dark:text-white tracking-tight hidden sm:inline",children:["ShieldGram ",(0,t.jsx)("span",{className:"text-slate-400 font-normal ml-1",children:"Dashboard"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative",ref:eV,children:[(0,t.jsxs)("button",{onClick:()=>Z(!W),className:`flex items-center gap-3 px-2 py-1.5 rounded-lg transition-all border border-transparent focus:outline-none ${!B?"bg-brand-50 dark:bg-brand-900/20 text-brand-600 dark:text-brand-400":"hover:bg-slate-100 dark:hover:bg-slate-800 hover:border-slate-200 dark:hover:border-slate-700"}`,children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-brand-600 text-white flex items-center justify-center font-bold text-xs shadow-sm overflow-hidden shrink-0",children:B?.profilePictureUrl?(0,t.jsx)("img",{src:B.profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):B?B.name.substring(0,2).toUpperCase():(0,t.jsx)(o.Shield,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{className:"hidden md:block text-left mr-1",children:[(0,t.jsx)("p",{className:`text-sm font-semibold leading-none ${!B?"text-brand-700 dark:text-brand-300":"text-slate-700 dark:text-slate-200"}`,children:B?.name||(F?"Loading...":"Select Account")}),(0,t.jsx)("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-medium leading-none mt-1.5",children:B?.handle||(F?"":"None active")})]}),(0,t.jsx)(v,{className:`w-4 h-4 text-slate-400 transition-transform ${W?"rotate-180":""}`})]}),W&&(0,t.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-slate-900 rounded-xl shadow-xl border border-slate-200 dark:border-slate-800 overflow-hidden z-50 animate-fade-in ring-1 ring-black/5",children:[(0,t.jsxs)("div",{className:"p-2 space-y-0.5",children:[(0,t.jsx)("div",{className:"px-3 py-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Switch Account"}),q.map(e=>(0,t.jsxs)("button",{onClick:()=>{B&&e.id===B.id?Z(!1):(J(e),Z(!1),eO(!1,e.id))},className:`w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm transition-all ${B.id===e.id?"bg-brand-50 dark:bg-brand-900/20 text-brand-700 dark:text-brand-300 font-medium":"hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs border overflow-hidden ${B.id===e.id?"bg-brand-200 dark:bg-brand-800 border-brand-300 dark:border-brand-700":"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500"}`,children:e.profilePictureUrl?(0,t.jsx)("img",{src:e.profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):e.name.substring(0,2).toUpperCase()}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{children:e.name}),(0,t.jsx)("p",{className:"text-xs opacity-60 font-normal",children:e.handle})]})]}),B.id===e.id&&(0,t.jsx)(p.Check,{className:"w-4 h-4 text-brand-600"})]},e.id))]}),(0,t.jsx)("div",{className:"border-t border-slate-100 dark:border-slate-800 p-2",children:(0,t.jsxs)("button",{onClick:()=>{window.location.href="https://www.instagram.com/oauth/authorize?force_reauth=true&client_id=2024506878093004&redirect_uri=https://dashboard.shieldgram.com&response_type=code&scope=instagram_business_basic%2Cinstagram_business_manage_messages%2Cinstagram_business_manage_comments%2Cinstagram_business_content_publish%2Cinstagram_business_manage_insights",Z(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors font-medium group",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center border border-dashed border-slate-300 dark:border-slate-600 group-hover:border-slate-400 dark:group-hover:border-slate-500 transition-colors",children:(0,t.jsx)(w,{className:"w-4 h-4"})}),(0,t.jsx)("span",{children:"Add New Account"})]})})]})]}),(0,t.jsx)("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-800 mx-2"}),M&&(0,t.jsx)("button",{onClick:M,className:"p-2 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Toggle Theme",children:n?(0,t.jsx)(x.Sun,{className:"w-5 h-5"}):(0,t.jsx)(m.Moon,{className:"w-5 h-5"})}),e&&(0,t.jsxs)("button",{onClick:e,className:"flex items-center gap-2 text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:[(0,t.jsx)(c,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex space-x-8",children:[(0,t.jsxs)("button",{onClick:()=>E("overview"),disabled:!ew.plan,className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${"overview"===R?"border-brand-600 text-brand-600 dark:border-brand-400 dark:text-brand-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"} ${!ew.plan?"opacity-50 cursor-not-allowed":""}`,children:[(0,t.jsx)(h.LayoutDashboard,{className:"w-4 h-4"})," Overview ",!ew.plan&&(0,t.jsx)(u.Lock,{className:"w-3 h-3"})]}),(0,t.jsxs)("button",{onClick:()=>E("controls"),disabled:!ew.plan,className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${"controls"===R?"border-brand-600 text-brand-600 dark:border-brand-400 dark:text-brand-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"} ${!ew.plan?"opacity-50 cursor-not-allowed":""}`,children:[(0,t.jsx)(b,{className:"w-4 h-4"})," Controls ",!ew.plan&&(0,t.jsx)(u.Lock,{className:"w-3 h-3"})]}),(0,t.jsxs)("button",{onClick:()=>E("plan"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${"plan"===R?"border-brand-600 text-brand-600 dark:border-brand-400 dark:text-brand-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:[(0,t.jsx)(f,{className:"w-4 h-4"})," Plan & Billing"]}),(0,t.jsxs)("button",{onClick:()=>E("security"),disabled:!ew.plan,className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${"security"===R?"border-brand-600 text-brand-600 dark:border-brand-400 dark:text-brand-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"} ${!ew.plan?"opacity-50 cursor-not-allowed":""}`,children:[(0,t.jsx)(u.Lock,{className:"w-4 h-4"})," Security ",!ew.plan&&(0,t.jsx)(u.Lock,{className:"w-3 h-3"})]})]})})}),(0,t.jsx)("main",{className:"flex-grow py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[V&&(0,t.jsxs)("div",{className:`fixed top-24 right-4 sm:right-8 z-50 flex items-center gap-2 text-sm font-medium px-4 py-3 rounded-lg shadow-xl border animate-slide-in max-w-[calc(100vw-2rem)] sm:max-w-md ${"success"===V.type?"text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/90 border-green-200 dark:border-green-800":"text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/90 border-red-200 dark:border-red-800"}`,children:["success"===V.type?(0,t.jsx)(i.CheckCircle,{className:"w-5 h-5 shrink-0"}):(0,t.jsx)(N,{className:"w-5 h-5 shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:V.message})]}),F?(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center h-96 gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-brand-100 dark:border-brand-900 rounded-full border-t-brand-600 animate-spin"}),(0,t.jsx)(o.Shield,{className:"w-6 h-6 text-brand-600 absolute inset-0 m-auto"})]}),(0,t.jsx)("p",{className:"text-slate-500 font-medium animate-pulse",children:"Syncing your protection..."})]}):0===q.length&&"plan"!==R?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto text-center py-20 px-6 animate-fade-in",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-brand-50 dark:bg-brand-900/20 rounded-3xl flex items-center justify-center mx-auto mb-8 rotate-3 shadow-inner text-brand-600",children:(0,t.jsx)(r.ShieldCheck,{className:"w-12 h-12"})}),(0,t.jsx)("h2",{className:"text-3xl font-extrabold text-slate-900 dark:text-white mb-4 tracking-tight",children:"Ready to Secure Your Growth?"}),(0,t.jsx)("p",{className:"text-lg text-slate-600 dark:text-slate-400 mb-10 max-w-xl mx-auto leading-relaxed",children:"Link your Instagram account to start automated AI moderation. ShieldGram protects your brand from spam and toxicity 24/7."}),ew.plan?(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[(0,t.jsxs)("button",{onClick:()=>{window.location.href="https://www.instagram.com/oauth/authorize?force_reauth=true&client_id=2024506878093004&redirect_uri=https://dashboard.shieldgram.com&response_type=code&scope=instagram_business_basic%2Cinstagram_business_manage_messages%2Cinstagram_business_manage_comments%2Cinstagram_business_content_publish%2Cinstagram_business_manage_insights"},className:"w-full sm:w-auto px-8 py-4 bg-brand-600 hover:bg-brand-700 text-white rounded-xl font-bold shadow-xl shadow-brand-500/20 transition-all flex items-center justify-center gap-2 group",children:[(0,t.jsx)(w,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"})," Connect Instagram"]}),(0,t.jsx)("button",{onClick:()=>E("plan"),className:"w-full sm:w-auto px-8 py-4 bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-800 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-800 transition-all",children:"Manage Plan"})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,t.jsx)("p",{className:"text-sm font-bold text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 px-4 py-2 rounded-full border border-amber-100 dark:border-amber-900/30",children:"Choose a Plan First"}),(0,t.jsxs)("button",{onClick:()=>E("plan"),className:"w-full sm:w-auto px-10 py-4 bg-brand-600 hover:bg-brand-700 text-white rounded-xl font-bold shadow-xl shadow-brand-500/20 transition-all flex items-center justify-center gap-2 group",children:["View Subscription Plans ",(0,t.jsx)(g,{className:"w-4 h-4 group-hover:rotate-180 transition-transform duration-500"})]})]}),(0,t.jsxs)("div",{className:"mt-16 grid grid-cols-1 sm:grid-cols-3 gap-8 opacity-60",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 justify-center",children:[(0,t.jsx)(j.Zap,{className:"w-5 h-5 text-brand-500"})," ",(0,t.jsx)("span",{className:"text-sm font-medium",children:"Real-time AI"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 justify-center",children:[(0,t.jsx)(u.Lock,{className:"w-5 h-5 text-purple-500"})," ",(0,t.jsx)("span",{className:"text-sm font-medium",children:"Spam-free feed"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 justify-center",children:[(0,t.jsx)(l.ShieldAlert,{className:"w-5 h-5 text-red-500"})," ",(0,t.jsx)("span",{className:"text-sm font-medium",children:"Policy Enforced"})]})]})]}):(0,t.jsxs)(t.Fragment,{children:["overview"===R&&(0,t.jsxs)("div",{className:"animate-fade-in relative",children:[B?.isDeauthorized&&(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-950/80 backdrop-blur-sm rounded-xl"}),(0,t.jsxs)("div",{className:"relative bg-white dark:bg-slate-900 border border-red-200 dark:border-red-800 rounded-2xl p-8 max-w-md text-center shadow-xl",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(l.ShieldAlert,{className:"w-8 h-8 text-red-500"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Account Disconnected"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"You have de-authorized ShieldGram from your Instagram account. Please reconnect to resume protection."}),(0,t.jsx)("button",{onClick:()=>{let e=`${window.location.origin}/dashboard`,t=`https://www.instagram.com/oauth/authorize?enable_fb_login=0&force_authentication=1&client_id=2024506878093004&redirect_uri=${encodeURIComponent(e)}&response_type=code&scope=instagram_business_basic,instagram_business_manage_comments,instagram_business_manage_messages`;window.location.href=t},className:"px-6 py-3 rounded-xl font-semibold bg-brand-600 hover:bg-brand-700 text-white transition-all",children:"Reconnect Instagram"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Overview"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>eO(),disabled:F,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 hover:border-brand-200 dark:hover:border-brand-800 transition-all shadow-sm group",title:"Refresh Dashboard",children:(0,t.jsx)(g,{className:`w-4 h-4 group-hover:rotate-180 transition-transform duration-500 ${F?"animate-spin":""}`})}),(0,t.jsx)("span",{className:"text-xs font-mono text-slate-400 flex items-center gap-2",children:(0,t.jsxs)("span",{className:`px-2 py-0.5 rounded-full text-[10px] uppercase font-bold border ${"max"===ew.plan?"bg-purple-100 text-purple-700 border-purple-200":"pro"===ew.plan?"bg-brand-100 text-brand-700 border-brand-200":"bg-slate-100 text-slate-600 border-slate-200"}`,children:[ew.plan," Plan"]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 transition-colors",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Comments Scanned"}),(0,t.jsx)("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white mt-2",children:ep.scanned.toLocaleString()}),(0,t.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2 flex items-center gap-1",children:(0,t.jsx)("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Scanned"})})]}),(0,t.jsx)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,t.jsx)(s.BarChart3,{className:"w-6 h-6 text-brand-600 dark:text-brand-400"})})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 transition-colors",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Threats Blocked"}),(0,t.jsx)("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white mt-2",children:ep.moderated.toLocaleString()}),(0,t.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2 flex items-center gap-1",children:(0,t.jsx)("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Moderated"})})]}),(0,t.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:(0,t.jsx)(l.ShieldAlert,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 transition-colors",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Avg. Response Time"}),(0,t.jsx)("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white mt-2",children:0===ep.averageResponseTime?"-":ep.averageResponseTime<1?"< 1s":`${ep.averageResponseTime.toFixed(1)}s`}),(0,t.jsxs)("p",{className:"text-xs text-brand-600 dark:text-brand-400 mt-2 flex items-center gap-1",children:[(0,t.jsx)(j.Zap,{className:"w-3 h-3"})," ",(0,t.jsx)("span",{className:"font-bold",children:"Fast Protection"})]})]}),(0,t.jsx)("div",{className:"p-3 bg-brand-50 dark:bg-brand-900/20 rounded-lg",children:(0,t.jsx)(j.Zap,{className:"w-6 h-6 text-brand-600 dark:text-brand-400"})})]})})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Recent Automated Interventions"})}),0===ef.length?(0,t.jsx)("div",{className:"text-center py-12 bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800 border-dashed",children:(0,t.jsx)("p",{className:"text-slate-500",children:"No activity logged yet."})}):(0,t.jsx)("div",{className:"grid gap-4",children:ef.map(e=>(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row sm:items-center justify-between gap-4 transition-colors",children:[(0,t.jsx)("div",{className:"flex items-start gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:e.author}),(0,t.jsx)("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:e.timestamp})]}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-300 mt-1 text-sm bg-slate-50 dark:bg-slate-800 p-2 rounded border border-slate-100 dark:border-slate-700",children:e.text}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[e.riskLevel!==A.CommentRiskLevel.SAFE&&(0,t.jsx)("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full border ${e.riskLevel===A.CommentRiskLevel.SPAM?"bg-yellow-50 text-yellow-700 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800":e.riskLevel===A.CommentRiskLevel.TOXIC?"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800":"bg-orange-50 text-orange-700 border-orange-200 dark:bg-orange-900/20 dark:text-orange-400 dark:border-orange-800"}`,children:e.riskLevel}),(0,t.jsxs)("span",{className:`text-[10px] uppercase font-medium ${"APPROVED"===e.actionTaken?"text-green-600 dark:text-green-400":"text-slate-400 dark:text-slate-500"}`,children:["Action: ",e.actionTaken]})]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 self-end sm:self-center",children:[(0,t.jsx)("button",{onClick:()=>e0(e.id,"SAFE"),disabled:"DELETE"===e.actionTaken,className:`p-2 rounded-lg transition-colors ${"DELETE"===e.actionTaken?"text-slate-200 dark:text-slate-800 cursor-not-allowed":"text-slate-400 dark:text-slate-500 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20"}`,title:"DELETE"===e.actionTaken?"Cannot restore deleted comment":"Mark as Safe (False Positive)",children:(0,t.jsx)(i.CheckCircle,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>e0(e.id,"DELETE"),disabled:"DELETE"===e.actionTaken,className:`p-2 rounded-lg transition-colors ${"DELETE"===e.actionTaken?"text-slate-200 dark:text-slate-800 cursor-not-allowed":"text-slate-400 dark:text-slate-500 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"}`,title:"DELETE"===e.actionTaken?"Permanently Deleted":"Delete Comment",children:(0,t.jsx)(d,{className:"w-5 h-5"})})]})]},e.id))}),(0,t.jsx)("button",{onClick:()=>{if(!B)return;let e=ej+10;ev(e),eH(B.id,e)},disabled:D,className:"w-full py-3 text-sm text-slate-500 dark:text-slate-400 hover:text-brand-600 dark:hover:text-brand-400 font-medium border border-dashed border-slate-300 dark:border-slate-700 rounded-lg hover:border-brand-300 dark:hover:border-brand-600 hover:bg-brand-50 dark:hover:bg-brand-900/20 transition-all mt-4 flex items-center justify-center gap-2",children:D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-brand-600 animate-spin rounded-full"}),"Loading..."]}):"Load More History"})]})]}),"controls"===R&&(0,t.jsxs)("div",{className:"animate-fade-in max-w-3xl mx-auto relative",children:[B?.isDeauthorized&&(0,t.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 mb-8 text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-3",children:[(0,t.jsx)(l.ShieldAlert,{className:"w-6 h-6 text-red-500"}),(0,t.jsx)("h3",{className:"font-bold text-red-600 dark:text-red-400",children:"Account Disconnected"})]}),(0,t.jsx)("p",{className:"text-sm text-red-600/80 dark:text-red-400/80 mb-4",children:"Controls are disabled because you de-authorized ShieldGram. Reconnect your Instagram account or remove it below."}),(0,t.jsx)("button",{onClick:()=>{let e=`${window.location.origin}/dashboard`,t=`https://www.instagram.com/oauth/authorize?enable_fb_login=0&force_authentication=1&client_id=2024506878093004&redirect_uri=${encodeURIComponent(e)}&response_type=code&scope=instagram_business_basic,instagram_business_manage_comments,instagram_business_manage_messages`;window.location.href=t},className:"px-5 py-2 rounded-lg font-semibold bg-red-600 hover:bg-red-700 text-white text-sm transition-all",children:"Reconnect Instagram"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Moderation Policy"}),V&&"success"===V.type&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-3 py-1 rounded-full animate-fade-in",children:[(0,t.jsx)(p.Check,{className:"w-4 h-4"})," ",V.message]})]}),!e4&&(0,t.jsxs)("div",{className:"bg-brand-50 dark:bg-brand-900/10 border border-brand-100 dark:border-brand-900 p-4 rounded-xl mb-8 flex items-start gap-3",children:[(0,t.jsx)(j.Zap,{className:"w-5 h-5 text-brand-600 dark:text-brand-400 mt-0.5 fill-current"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-brand-900 dark:text-brand-100",children:"Unlock Advanced Controls"}),(0,t.jsxs)("p",{className:"text-sm text-brand-700 dark:text-brand-300 mt-1",children:["You are currently on the ",(0,t.jsx)("span",{className:"font-bold uppercase",children:ew.plan})," plan. Upgrade to Pro or Max to define custom AI instructions and specific policy nuances."]})]}),(0,t.jsx)("button",{onClick:()=>E("plan"),className:"ml-auto text-xs bg-brand-600 text-white px-3 py-2 rounded-lg font-medium hover:bg-brand-700",children:"Upgrade"})]}),(0,t.jsxs)("div",{className:B?.isDeauthorized?"opacity-50 pointer-events-none select-none":"",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 py-10 px-6",children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg mb-6 text-slate-900 dark:text-white flex items-center gap-2",children:[(0,t.jsx)(o.Shield,{className:"w-5 h-5 text-brand-500"})," Standard Protection"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:Object.entries(ew.policies).map(([e,a])=>{let s={profanity:"Profanity",sexualContent:"Sexual Content",hateSpeech:"Hate Speech",selfHarm:"Self-harm",violence:"Violence",negativity:"Negativity",harassment:"Harassment",spam:"Spam"}[e]||e;return(0,t.jsxs)("label",{className:`
                                                group relative flex items-center p-3 rounded-xl border cursor-pointer transition-all duration-200 select-none
                                                ${a?"bg-brand-50/50 dark:bg-brand-900/10 border-brand-200 dark:border-brand-800 ring-1 ring-brand-200 dark:ring-brand-800":"bg-white dark:bg-slate-950/50 border-slate-200 dark:border-slate-800 hover:border-slate-300 dark:hover:border-slate-700"}
                                            `,children:[(0,t.jsx)("input",{type:"checkbox",checked:a,onChange:t=>eN({...ew,policies:{...ew.policies,[e]:t.target.checked}}),className:"sr-only"}),(0,t.jsx)("div",{className:`
                                                w-5 h-5 rounded-md flex items-center justify-center transition-all duration-200 flex-shrink-0
                                                ${a?"bg-brand-600 border border-brand-600 shadow-sm scale-100":"bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-600 scale-95 group-hover:scale-100"}
                                            `,children:(0,t.jsx)(p.Check,{className:`w-3 h-3 text-white transition-all duration-200 ${a?"opacity-100 rotate-0":"opacity-0 -rotate-90"}`,strokeWidth:3})}),(0,t.jsx)("span",{className:`ml-2 text-xs font-bold truncate ${a?"text-brand-900 dark:text-brand-100":"text-slate-700 dark:text-slate-300"}`,children:s})]},e)})})]}),(0,t.jsxs)("div",{className:`bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 py-10 px-6 relative ${!e4?"opacity-70":""}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[(0,t.jsx)(b,{className:"w-5 h-5 text-purple-500"})," Custom Policies"]}),e4&&(0,t.jsxs)("button",{onClick:()=>{eM(""),eE(""),e$("spam"),eT(null),eA(!0)},className:"flex items-center gap-1.5 text-xs font-bold bg-brand-50 dark:bg-brand-900/20 text-brand-600 dark:text-brand-400 px-3 py-2 rounded-lg hover:bg-brand-100 dark:hover:bg-brand-900/40 transition-all border border-brand-200 dark:border-brand-800/50 uppercase tracking-tight",children:[(0,t.jsx)(w,{className:"w-3.5 h-3.5"})," Add New"]})]}),e4?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:0===Object.keys(ew.customPolicyDescriptions).length?(0,t.jsx)("div",{className:"col-span-full text-center py-8 border border-dashed border-slate-200 dark:border-slate-800 rounded-xl",children:(0,t.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-tight",children:"No custom policies"})}):Object.entries(ew.customPolicyDescriptions).map(([e,a])=>{let s=ew.selectedCustomPolicies.includes(e);return(0,t.jsxs)("div",{className:`group flex items-start gap-2.5 p-3 rounded-xl border transition-all duration-200 ${s?"bg-purple-50/50 dark:bg-purple-900/10 border-purple-200 dark:border-purple-800/50":"bg-white dark:bg-slate-950/50 border-slate-200 dark:border-slate-800"}`,children:[(0,t.jsx)("button",{onClick:()=>eX(e),className:`w-4 h-4 rounded flex-shrink-0 border transition-all mt-0.5 ${s?"bg-purple-600 border-purple-600":"bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700"}`,children:s&&(0,t.jsx)(p.Check,{className:"w-2.5 h-2.5 text-white mx-auto",strokeWidth:4})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 pointer-events-none sm:pointer-events-auto",onClick:()=>eX(e),style:{cursor:"pointer"},children:[(0,t.jsx)("h4",{className:`text-xs font-bold truncate ${s?"text-purple-950 dark:text-purple-100":"text-slate-900 dark:text-white"}`,children:e}),(0,t.jsx)("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-0.5 line-clamp-1",children:a})]}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),eT(e),eM(e);let s=a.match(/^Treat comments with (.*) as (.*)$/);s?(eE(s[1]),e$(s[2])):(eE(a),e$("spam")),eA(!0)},className:"p-1 text-slate-400 hover:text-brand-600 transition-colors",children:(0,t.jsx)(C,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),eQ(e)},className:"p-1 text-slate-400 hover:text-red-500 transition-colors",children:(0,t.jsx)(d,{className:"w-3 h-3"})})]})]},e)})}):(0,t.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-950/50 border border-dashed border-slate-200 dark:border-slate-800 rounded-xl p-8 flex flex-col items-center text-center justify-center",children:[(0,t.jsx)(u.Lock,{className:"w-8 h-8 text-slate-300 dark:text-slate-700 mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900 dark:text-white mb-1",children:"Pro Feature"}),(0,t.jsx)("button",{onClick:()=>E("plan"),className:"text-xs font-bold text-brand-600 dark:text-brand-400 underline underline-offset-4",children:"View Plans"})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-2 bg-brand-50 dark:bg-brand-900/20 rounded-lg text-brand-600 dark:text-brand-400",children:(0,t.jsx)(y.Target,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"AI Sensitivity"}),(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)(_.HelpCircle,{className:"w-3.5 h-3.5 text-slate-400 hover:text-brand-500 transition-colors cursor-help"}),(0,t.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 p-3 bg-slate-800 text-white text-xs rounded-xl shadow-xl opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100 transition-all pointer-events-none z-50 leading-relaxed font-medium",children:["• ",(0,t.jsx)("span",{className:"text-brand-300 font-bold",children:"Aggressive:"})," Flags more comments (potential false positives).",(0,t.jsx)("br",{}),"• ",(0,t.jsx)("span",{className:"text-brand-300 font-bold",children:"Strict:"})," Only flags very obvious violations."]})]})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:"Configure how confident AI must be to flag a comment"})]}),(0,t.jsx)("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-800 mx-2 hidden sm:block"})]}),(0,t.jsx)("div",{className:"flex bg-slate-100 dark:bg-slate-800 rounded-lg p-1 gap-1",children:[{label:"Aggressive",value:75},{label:"Balanced",value:90},{label:"Strict",value:99}].map(e=>{let a=75===e.value&&ew.confidenceThreshold<90||90===e.value&&ew.confidenceThreshold>=90&&ew.confidenceThreshold<99||99===e.value&&ew.confidenceThreshold>=99;return(0,t.jsx)("button",{onClick:()=>eN({...ew,confidenceThreshold:e.value}),className:`
                                                    px-4 py-1.5 rounded-md text-xs font-bold transition-all
                                                    ${a?"bg-white dark:bg-slate-700 text-brand-600 dark:text-brand-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}
                                                `,children:e.label},e.value)})})]}),eS&&(0,t.jsx)("div",{className:"fixed bottom-8 right-8 z-50 animate-in slide-in-from-bottom-5 fade-in duration-300",children:(0,t.jsxs)("div",{className:"bg-slate-900 text-white p-2 pl-5 pr-2 rounded-2xl shadow-2xl shadow-slate-900/40 flex items-center gap-6 border border-slate-700/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-amber-400 animate-pulse"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Unsaved changes"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{ey&&(eN(ey),H("Changes reverted","success"))},className:"px-4 py-2 rounded-xl text-xs font-bold hover:bg-white/10 text-slate-300 hover:text-white transition-colors",children:"Discard"}),(0,t.jsxs)("button",{onClick:eY,disabled:z,className:"px-5 py-2 rounded-xl bg-brand-600 hover:bg-brand-500 text-white text-xs font-bold shadow-lg shadow-brand-500/20 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[z&&(0,t.jsx)(S.Loader2,{className:"w-3 h-3 animate-spin"}),"Save Changes"]})]})]})})]}),(0,t.jsx)("div",{className:"my-10 border-t border-slate-200 dark:border-slate-800"}),(0,t.jsxs)("div",{className:"bg-red-50/30 dark:bg-red-900/5 rounded-xl border border-red-100 dark:border-red-900/30 p-6",children:[(0,t.jsxs)("h3",{className:"font-bold text-red-600 dark:text-red-400 flex items-center gap-2 mb-2",children:[(0,t.jsx)(d,{className:"w-5 h-5"})," Danger Zone"]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Remove Instagram Account"}),(0,t.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Permanently disconnect ",(0,t.jsx)("span",{className:"font-bold",children:B?.handle})]})]}),(0,t.jsx)("button",{onClick:()=>{eI(B),eU(!0)},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-xs font-bold rounded-lg transition-all shadow-lg shadow-red-500/10",children:"Remove Account"})]})]}),e_&&(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/40 backdrop-blur-sm",children:(0,t.jsx)("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden animate-in fade-in zoom-in duration-200",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:eP?"Edit Policy":"Create Custom Policy"}),(0,t.jsx)("button",{onClick:()=>eA(!1),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:(0,t.jsx)(N,{className:"w-5 h-5 rotate-45"})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5",children:"Policy Name"}),(0,t.jsx)("input",{type:"text",value:eL,onChange:e=>eM(e.target.value),disabled:!!eP,placeholder:"e.g. Scams, Competitors",className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-500 focus:border-transparent outline-none disabled:opacity-50"})]}),(0,t.jsx)("div",{className:"bg-slate-50 dark:bg-slate-950/50 p-4 rounded-xl border border-slate-200 dark:border-slate-800",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-600 dark:text-slate-400",children:(0,t.jsx)("span",{children:"Treat comments with"})}),(0,t.jsx)("textarea",{value:eR,onChange:e=>eE(e.target.value),className:"w-full h-20 px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-500 outline-none resize-none text-sm"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-600 dark:text-slate-400",children:[(0,t.jsx)("span",{children:"as"}),(0,t.jsxs)("select",{value:eF,onChange:e=>e$(e.target.value),className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg px-2 py-1.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-500 outline-none text-sm font-bold min-w-[120px]",children:[(0,t.jsx)("option",{value:"spam",children:"Spam"}),(0,t.jsx)("option",{value:"hateSpeech",children:"Hate Speech"}),(0,t.jsx)("option",{value:"harassment",children:"Harassment"}),(0,t.jsx)("option",{value:"violence",children:"Violence"}),(0,t.jsx)("option",{value:"sexualContent",children:"Sexual Content"}),(0,t.jsx)("option",{value:"selfHarm",children:"Self Harm"})]})]})]})})]}),(0,t.jsxs)("div",{className:"mt-8 flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>eA(!1),className:"flex-1 px-4 py-3 rounded-xl font-bold text-sm text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all",children:"Cancel"}),(0,t.jsx)("button",{onClick:eK,disabled:!eL||!eR||z,className:"flex-1 px-4 py-3 rounded-xl bg-brand-600 hover:bg-brand-700 text-white font-bold text-sm shadow-brand-500/20 shadow-lg disabled:opacity-50",children:z?"Saving...":"Save Policy"})]})]})})})]}),"plan"===R&&(0,t.jsxs)("div",{className:"animate-fade-in max-w-5xl mx-auto",children:[ec&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-2xl shadow-2xl max-w-sm w-full text-center border border-slate-200 dark:border-slate-800",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-brand-100 dark:bg-brand-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(g,{className:"w-8 h-8 text-brand-600 animate-spin"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Connecting to Razorpay"}),(0,t.jsxs)("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Securely loading checkout...",(0,t.jsx)("br",{}),"Please wait."]})]})}),(0,t.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Plan & Billing"})}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:ew.plan?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 overflow-hidden relative",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 p-4",children:(0,t.jsx)("div",{className:"bg-brand-50 dark:bg-brand-900/40 text-brand-600 dark:text-brand-400 text-xs font-bold px-2 py-1 rounded uppercase tracking-wider",children:"Active"})}),(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Current Plan"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-4",children:L[ew.plan]?.label}),(0,t.jsxs)("p",{className:"text-sm text-slate-500",children:["Renews on ",(0,t.jsx)("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Jan 12, 2026"})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["INR"===em?"₹":"$",L[ew.plan]?.price,(0,t.jsx)("span",{className:"text-sm font-normal text-slate-500",children:"/mo"})]})})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6",children:"Payment Method"}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,t.jsx)("div",{className:"w-12 h-8 bg-slate-100 dark:bg-slate-800 rounded flex items-center justify-center border border-slate-200 dark:border-slate-700",children:(0,t.jsx)("div",{className:"font-bold text-blue-600 italic text-xs",children:"VISA"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Visa ending in 4242"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Expires 12/2028"})]})]}),(0,t.jsx)("button",{className:"w-full py-2 text-sm text-slate-600 dark:text-slate-300 border border-slate-300 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Update Payment Method"})]})]}):(0,t.jsxs)("div",{className:"lg:col-span-2 bg-gradient-to-br from-brand-600 to-indigo-700 rounded-2xl shadow-xl p-8 text-white relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Welcome to ShieldGram!"}),(0,t.jsx)("p",{className:"text-lg opacity-90 max-w-2xl mb-6",children:"To start protecting your Instagram account with AI-powered moderation, please select a protection plan below. Our plans include a 30-day money-back guarantee."}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm font-medium",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-white/10 px-3 py-1.5 rounded-full",children:[(0,t.jsx)(o.Shield,{className:"w-4 h-4"})," 24/7 Protection"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-white/10 px-3 py-1.5 rounded-full",children:[(0,t.jsx)(j.Zap,{className:"w-4 h-4"})," Real-time Blocking"]})]})]}),(0,t.jsx)(o.Shield,{className:"absolute -bottom-10 -right-10 w-64 h-64 opacity-10 rotate-12"})]})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"Available Plans"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.keys(L).map(e=>{let a=L[e],s=ew.plan===e,r="--",l=eb.find(e=>e.name.toLowerCase().includes(a.label.toLowerCase())&&e.currency===em);l&&(r=l.amount/100);let n=eb.find(e=>e.name.toLowerCase().includes(L[ew.plan]?.label?.toLowerCase()||"")&&e.currency===em),d=n?.amount||0,o="number"==typeof r&&100*r>d;return(0,t.jsxs)("div",{className:`relative flex flex-col p-6 rounded-xl border transition-all ${s?"bg-brand-50/50 dark:bg-brand-900/10 border-brand-200 dark:border-brand-800 ring-1 ring-brand-500 dark:ring-brand-400":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 hover:border-brand-300 dark:hover:border-brand-700 hover:shadow-md"}`,children:[s&&(0,t.jsx)("div",{className:"absolute top-0 right-0 -mt-3 -mr-3",children:(0,t.jsx)("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-brand-600 text-white shadow-sm",children:(0,t.jsx)(p.Check,{className:"w-4 h-4"})})}),(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white capitalize",children:a.label}),(0,t.jsxs)("div",{className:"mt-2 mb-6",children:[(0,t.jsxs)("span",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:["INR"===em?"₹":"$",r]}),(0,t.jsx)("span",{className:"text-slate-500 text-sm",children:"/mo"})]}),(0,t.jsx)("ul",{className:"space-y-3 mb-8 flex-1",children:a.features.map((e,a)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm text-slate-600 dark:text-slate-400",children:[(0,t.jsx)(i.CheckCircle,{className:"w-4 h-4 text-green-500 shrink-0 mt-0.5"}),e]},a))}),(0,t.jsx)("button",{onClick:()=>e1(e),disabled:s||ec,className:`w-full py-2.5 px-4 rounded-lg font-medium transition-colors text-sm ${s?"bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-300 cursor-default":o?"bg-slate-900 dark:bg-white text-white dark:text-slate-900 hover:bg-slate-800 dark:hover:bg-slate-100 shadow-sm":"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-400 border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:s?"Current Plan":o?"Upgrade":"Downgrade"})]},e)})}),(0,t.jsxs)("div",{className:"mt-12 bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:[(0,t.jsx)("div",{className:"p-6 border-b border-slate-200 dark:border-slate-800",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Billing History"})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,t.jsx)("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-slate-500 dark:text-slate-400",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 font-medium",children:"Date"}),(0,t.jsx)("th",{className:"px-6 py-4 font-medium",children:"Amount"}),(0,t.jsx)("th",{className:"px-6 py-4 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 font-medium text-right",children:"Invoice"})]})}),(0,t.jsxs)("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:[(0,t.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 dark:text-slate-300",children:"Oct 12, 2024"}),(0,t.jsx)("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:"$5.00"}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border border-green-200 dark:border-green-800",children:"Paid"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsxs)("button",{className:"text-brand-600 dark:text-brand-400 hover:underline flex items-center gap-1 justify-end ml-auto",children:[(0,t.jsx)(k,{className:"w-4 h-4"})," PDF"]})})]}),(0,t.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 dark:text-slate-300",children:"Sep 12, 2024"}),(0,t.jsx)("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:"$5.00"}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border border-green-200 dark:border-green-800",children:"Paid"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsxs)("button",{className:"text-brand-600 dark:text-brand-400 hover:underline flex items-center gap-1 justify-end ml-auto",children:[(0,t.jsx)(k,{className:"w-4 h-4"})," PDF"]})})]})]})]})})]})]}),"security"===R&&(0,t.jsxs)("div",{className:"animate-fade-in max-w-2xl mx-auto",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Security Settings"})}),!Q&&(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${Y?"bg-green-50 dark:bg-green-900/20 text-green-600":"bg-slate-50 dark:bg-slate-800 text-slate-400"}`,children:(0,t.jsx)(r.ShieldCheck,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Multi-Factor Authentication (MFA)"}),(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Secure your account with an extra layer of protection using your preferred authenticator app."})]})]}),Y?(0,t.jsxs)("div",{className:"flex flex-col border border-slate-100 dark:border-slate-800 rounded-xl p-6 bg-slate-50/50 dark:bg-slate-950/20",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-sm font-bold text-green-600 dark:text-green-400 uppercase tracking-wider",children:"Active Protection"})]}),(0,t.jsx)("button",{onClick:eZ,className:"text-xs text-red-600 dark:text-red-400 font-bold hover:underline",children:"Disable MFA"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)(i.CheckCircle,{className:"w-5 h-5 text-green-500 shrink-0 mt-0.5"}),(0,t.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:"Your account is secured with 2FA. Every time you log in, you will be prompted for a 6-digit code from your authenticator app."})]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center py-6 text-center",children:[(0,t.jsx)(u.Lock,{className:"w-12 h-12 text-slate-200 dark:text-slate-800 mb-4"}),(0,t.jsx)("h4",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Authenticator App is Not Active"}),(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-sm max-w-md mb-8",children:"We recommend enabling MFA to protect your account from unauthorized access. You'll need an app like Google Authenticator or Authy."}),(0,t.jsxs)("button",{onClick:eJ,disabled:er,className:"px-6 py-2.5 bg-brand-600 hover:bg-brand-700 text-white font-semibold rounded-xl shadow-lg shadow-brand-500/20 transition-all flex items-center gap-2 disabled:opacity-50",children:[er?(0,t.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin text-white"}):(0,t.jsx)(r.ShieldCheck,{className:"w-4 h-4"}),"Enable MFA"]})]})]}),Q&&ee&&(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl border-2 border-brand-500 dark:border-brand-500/50 p-8 animate-in slide-in-from-top-4 duration-300",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"Configure Authenticator App"}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 flex items-center justify-center font-bold text-sm border border-slate-200 dark:border-slate-700",children:"1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-bold text-slate-900 dark:text-white mb-2",children:"Scan or Enter Secret"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Open your authenticator app (Google Authenticator, Authy, etc.) and scan the QR code below, or enter the secret manually."}),(0,t.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-950 p-4 rounded-xl border border-slate-100 dark:border-slate-800 inline-block",children:[(0,t.jsx)("div",{className:"w-48 h-48 bg-white dark:bg-slate-900 rounded-lg flex items-center justify-center border border-slate-200 dark:border-slate-700 mb-4",children:(0,t.jsx)("img",{src:`https://quickchart.io/qr?text=${encodeURIComponent(`otpauth://totp/ShieldGram?secret=${ee}&issuer=ShieldGram`)}&size=200`,alt:"QR Code",className:"w-full h-full p-2"})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-[10px] text-slate-400 uppercase font-black tracking-widest mb-1",children:"Manual Entry Code"}),(0,t.jsx)("code",{className:"text-sm font-mono text-brand-600 dark:text-brand-400 break-all bg-brand-50 dark:bg-brand-900/20 px-2 py-1 rounded select-all font-bold",children:ee})]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 flex items-center justify-center font-bold text-sm border border-slate-200 dark:border-slate-700",children:"2"}),(0,t.jsxs)("div",{className:"flex-grow",children:[(0,t.jsx)("h4",{className:"font-bold text-slate-900 dark:text-white mb-2",children:"Verify Code"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Enter the 6-digit code currently shown in your app to confirm setup."}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",maxLength:6,value:ea,onChange:e=>es(e.target.value.replace(/[^0-9]/g,"")),className:"w-full sm:w-48 px-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all text-center text-2xl font-bold tracking-[0.5em] text-slate-900 dark:text-white",placeholder:"000000"}),(0,t.jsx)("button",{onClick:eW,disabled:en||6!==ea.length,className:"px-6 py-3 bg-brand-600 hover:bg-brand-700 text-white font-black rounded-xl shadow-lg shadow-brand-500/20 transition-all flex items-center gap-2 disabled:opacity-50 uppercase text-xs",children:en?(0,t.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin"}):"Verify & Finish"})]})]})]})]}),(0,t.jsx)("div",{className:"mt-10 pt-6 border-t border-slate-100 dark:border-slate-800 flex justify-end",children:(0,t.jsx)("button",{onClick:()=>{X(!1),et(null),es("")},className:"text-sm font-bold text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors",children:"Cancel Setup"})})]})]})]})]})}),eD&&ez&&(0,t.jsx)("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-slate-950/60 backdrop-blur-sm animate-in fade-in duration-200",children:(0,t.jsx)("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden animate-in zoom-in-95 duration-200",children:(0,t.jsxs)("div",{className:"p-6 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-50 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4 text-red-600",children:(0,t.jsx)(d,{className:"w-8 h-8"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Remove Account?"}),(0,t.jsxs)("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:["Are you sure you want to remove ",(0,t.jsx)("span",{className:"font-bold text-slate-900 dark:text-white",children:ez.handle}),"? All associated moderation history and statistics will be permanently deleted."]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("button",{onClick:e2,disabled:z,className:"w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl shadow-lg shadow-red-500/20 transition-all disabled:opacity-50",children:z?"Removing...":"Yes, Remove Account"}),(0,t.jsx)("button",{onClick:()=>{eU(!1),eI(null)},disabled:z,className:"w-full py-3 text-slate-600 dark:text-slate-400 font-bold hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all",children:"Cancel"})]})]})})})]})};var R=e.i(72520);let E=(0,n.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.i(88123);var F=e.i(46134),$=e.i(63123),D=e.i(64690),D=D,U=e.i(36271);let z="us-east-1_ZzzjCk0xy",I=({onLoginSuccess:e,onCancel:s})=>{let[r,l]=(0,a.useState)("signin"),[n,d]=(0,a.useState)(!1),[i,o]=(0,a.useState)(""),[c,x]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[b,u]=(0,a.useState)(null),[p,f]=(0,a.useState)(null),[k,j]=(0,a.useState)(null),v=!z||z.includes("xxx"),w=null;if(!v)try{w=new F.CognitoUserPool({UserPoolId:z,ClientId:"1b0v6afasbk0kbhp68dijl5s4c"})}catch(e){console.error("Error initializing Cognito User Pool:",e)}return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-950 px-4 py-12 transition-colors duration-300",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-white dark:bg-slate-900 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-800 p-8",children:[(0,t.jsx)("div",{className:"flex justify-center mb-8",children:(0,t.jsx)("img",{src:"/logo.svg",alt:"ShieldGram",className:"h-16 w-auto"})}),(0,t.jsx)("h2",{className:"text-center text-2xl font-bold text-slate-900 dark:text-white mb-2",children:(()=>{switch(r){case"signin":return"Welcome back";case"signup":return"Create an account";case"verify":return"Verify email";case"totp":return"Security Check"}})()}),(0,t.jsx)("p",{className:"text-center text-slate-600 dark:text-slate-400 mb-8",children:(()=>{switch(r){case"signin":return"Sign in to access your dashboard";case"signup":return"Start your 1-month free trial";case"verify":return"Enter the code sent to your email";case"totp":return"Enter the 6-digit code from your authenticator app"}})()}),b&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg border border-red-100 dark:border-red-800 animate-fade-in",children:b}),p&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 text-sm rounded-lg border border-green-100 dark:border-green-800 flex items-center gap-2 animate-fade-in",children:[(0,t.jsx)(E,{className:"w-4 h-4"}),p]}),(0,t.jsxs)("form",{onSubmit:"signin"===r?t=>{if(t.preventDefault(),d(!0),u(null),v){console.warn("AWS Cognito Config missing or using placeholders. Using mock login for demo."),setTimeout(()=>{(0,U.setAuthTokens)({accessToken:"shieldgram-dummy-access-token",idToken:"shieldgram-dummy-id-token",refreshToken:"shieldgram-dummy-refresh-token"}),d(!1),e()},1e3);return}let a=new D.default({Username:i,Password:c}),s=new $.CognitoUser({Username:i,Pool:w});s.authenticateUser(a,{onSuccess:t=>{d(!1),(0,U.setAuthTokens)({accessToken:t.getAccessToken().getJwtToken(),idToken:t.getIdToken().getJwtToken(),refreshToken:t.getRefreshToken().getToken()}),e()},onFailure:e=>{d(!1),console.error(e),u(e.message||"Authentication failed")},totpRequired:e=>{d(!1),j(s),l("totp")},newPasswordRequired:(e,t)=>{d(!1),u("New password required (Challenge not implemented in boilerplate)")}})}:"signup"===r?e=>{if(e.preventDefault(),d(!0),u(null),v){console.warn("AWS Cognito Config missing or using placeholders. Using mock signup for demo."),setTimeout(()=>{d(!1),l("verify"),f("Mock verification code sent! (Use any code)")},1e3);return}w&&w.signUp(i,c,[],[],(e,t)=>{if(d(!1),e){console.error(e),u(e.message||JSON.stringify(e));return}l("verify"),f("Account created! Please check your email for the verification code.")})}:"verify"===r?e=>{(e.preventDefault(),d(!0),u(null),f(null),v)?setTimeout(()=>{d(!1),l("signin"),f("Account verified! Please sign in."),h("")},1e3):new $.CognitoUser({Username:i,Pool:w}).confirmRegistration(m,!0,(e,t)=>{if(d(!1),e){console.error(e),u(e.message||"Verification failed");return}l("signin"),f("Verification successful! You can now log in."),h("")})}:t=>{if(t.preventDefault(),d(!0),u(null),v)return void setTimeout(()=>{(0,U.setAuthTokens)({accessToken:"shieldgram-dummy-access-token",idToken:"shieldgram-dummy-id-token",refreshToken:"shieldgram-dummy-refresh-token"}),d(!1),e()},1e3);if(!k){u("Authentication session lost. Please try signing in again."),l("signin"),d(!1);return}k.sendMFACode(m,{onSuccess:t=>{d(!1),(0,U.setAuthTokens)({accessToken:t.getAccessToken().getJwtToken(),idToken:t.getIdToken().getJwtToken(),refreshToken:t.getRefreshToken().getToken()}),e()},onFailure:e=>{d(!1),console.error(e),u(e.message||"Verification failed")}},"SOFTWARE_TOKEN_MFA")},className:"space-y-4",children:["verify"!==r&&"totp"!==r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email Address"}),(0,t.jsx)("input",{type:"email",required:!0,value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:ring-2 focus:ring-brand-500 outline-none transition-all dark:text-white",placeholder:"name@company.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",required:!0,value:c,onChange:e=>x(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:ring-2 focus:ring-brand-500 outline-none transition-all dark:text-white",placeholder:"••••••••"}),"signup"===r&&(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Must be at least 8 characters with numbers and symbols."})]})]}),("verify"===r||"totp"===r)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"verify"===r?"Email Verification Code":"Authenticator App Code"}),(0,t.jsx)("input",{type:"text",required:!0,value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 focus:ring-2 focus:ring-brand-500 outline-none transition-all dark:text-white text-center text-xl tracking-widest",placeholder:"123456"}),"verify"===r&&(0,t.jsx)("div",{className:"flex justify-end mt-2",children:(0,t.jsxs)("button",{type:"button",onClick:()=>{v?f("Mock code resent!"):new $.CognitoUser({Username:i,Pool:w}).resendConfirmationCode((e,t)=>{e?u(e.message||"Failed to resend code"):f("Verification code resent successfully.")})},className:"text-sm text-brand-600 dark:text-brand-400 hover:underline flex items-center gap-1",children:[(0,t.jsx)(g,{className:"w-3 h-3"})," Resend Code"]})})]}),(0,t.jsxs)("button",{type:"submit",disabled:n,className:"w-full py-3 px-4 bg-brand-600 hover:bg-brand-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-6",children:[n?(0,t.jsx)(S.Loader2,{className:"w-5 h-5 animate-spin"}):"signin"===r?"Sign In":"signup"===r?"Create Account":"verify"===r?"Verify Account":"Verify & Login",!n&&(0,t.jsx)(R.ArrowRight,{className:"w-4 h-4"})]}),"signup"===r&&(0,t.jsxs)("p",{className:"mt-4 text-[10px] text-center text-slate-500 leading-relaxed uppercase tracking-wider",children:["By creating an account, you agree to our"," ",(0,t.jsx)("a",{href:"#/terms",target:"_blank",className:"text-brand-600 hover:text-brand-500 font-bold underline",children:"Terms of Service"})," ","and"," ",(0,t.jsx)("a",{href:"#/privacy",target:"_blank",className:"text-brand-600 hover:text-brand-500 font-bold underline",children:"Privacy Policy"})]})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["signin"===r?"Don't have an account? ":"signup"===r?"Already have an account? ":"Wrong email? ",(0,t.jsx)("button",{onClick:()=>{u(null),f(null),"verify"===r||"totp"===r?l("signin"):l("signin"===r?"signup":"signin")},className:"text-brand-600 dark:text-brand-400 font-semibold hover:underline",children:"signin"===r?"Sign up":"signup"===r?"Log in":"Back"})]})}),(0,t.jsx)("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-800 text-center",children:(0,t.jsx)("button",{onClick:s,className:"text-sm text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:"Return to Home"})})]})})};function V(){let[e,s]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!0),[n,d]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{"dark"===((0,U.getThemeCookie)()||localStorage.getItem("theme"))?(d(!0),document.documentElement.classList.add("dark")):(d(!1),document.documentElement.classList.remove("dark"))},[]),(0,a.useEffect)(()=>{(async()=>{try{await (0,P.getValidToken)(),s(!0)}catch(e){s(!1)}finally{l(!1)}})()},[]),r)?(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center",children:"Loading..."}):e?(0,t.jsx)("div",{className:`min-h-screen ${n?"dark":""}`,children:(0,t.jsx)(M,{onLogout:()=>{(0,U.removeAuthToken)(),s(!1),window.location.href="/"},isDarkMode:n,toggleTheme:()=>{let e=!n;d(e);let t=e?"dark":"light";e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",t),(0,U.setThemeCookie)(t)}})}):(0,t.jsx)("div",{className:`min-h-screen ${n?"dark":""}`,children:(0,t.jsx)(I,{onLoginSuccess:()=>{s(!0),window.location.reload()},onCancel:()=>window.location.href="/"})})}e.s(["default",()=>V],78928)}]);