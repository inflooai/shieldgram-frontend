{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\nexport const config = {\n  matcher: [\n    /*\n     * Match all paths except for:\n     * 1. /api routes\n     * 2. /_next (Next.js internals)\n     * 3. /_static (inside /public)\n     * 4. all root files inside /public (e.g. /favicon.ico)\n     */\n    \"/((?!api/|_next/|_static/|[\\\\w-]+\\\\.\\\\w+).*)\",\n  ],\n};\n\nexport function middleware(req: NextRequest) {\n  const url = req.nextUrl;\n  const hostname = req.headers.get(\"host\") || \"\";\n\n  // Define allowed domains (localhost handled automatically mostly, but good to be explicit)\n  // We assume 'dashboard.' prefix is the trigger.\n  \n  const isDashboard = hostname.startsWith(\"dashboard.\");\n\n  if (isDashboard) {\n    // Rewrite requests to /dashboard/*\n    // e.g. dashboard.example.com/ -> /dashboard\n    // e.g. dashboard.example.com/settings -> /dashboard/settings\n    \n    // Maintain the path execution if it's not already in /dashboard (rewrite, not redirect)\n    if (!url.pathname.startsWith('/dashboard')) {\n        url.pathname = `/dashboard${url.pathname === '/' ? '' : url.pathname}`;\n        return NextResponse.rewrite(url);\n    }\n  } else {\n      // Landing page logic:\n      // Prevent access to /dashboard routes via main domain\n      // Allow access to /dashboard on main domain (e.g. for localhost)\n      // if (url.pathname.startsWith('/dashboard')) {\n      //    url.pathname = '/404';\n      //    return NextResponse.rewrite(url);\n      // }\n  }\n\n  return NextResponse.next();\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;KAMC,GACD;KACD;AACH;AAEO,SAAS,WAAW,GAAgB;IACzC,MAAM,MAAM,IAAI,OAAO;IACvB,MAAM,WAAW,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW;IAE5C,2FAA2F;IAC3F,gDAAgD;IAEhD,MAAM,cAAc,SAAS,UAAU,CAAC;IAExC,IAAI,aAAa;QACf,mCAAmC;QACnC,4CAA4C;QAC5C,6DAA6D;QAE7D,wFAAwF;QACxF,IAAI,CAAC,IAAI,QAAQ,CAAC,UAAU,CAAC,eAAe;YACxC,IAAI,QAAQ,GAAG,CAAC,UAAU,EAAE,IAAI,QAAQ,KAAK,MAAM,KAAK,IAAI,QAAQ,EAAE;YACtE,OAAO,gMAAY,CAAC,OAAO,CAAC;QAChC;IACF,OAAO;IACH,sBAAsB;IACtB,sDAAsD;IACtD,iEAAiE;IACjE,+CAA+C;IAC/C,4BAA4B;IAC5B,uCAAuC;IACvC,IAAI;IACR;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B"}}]
}